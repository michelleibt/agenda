<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agenda de Tarefas Semanal</title>
<style>
  body { font-family: Arial, sans-serif; background: #f0f4f8; margin:0; padding:0; }
  header { background: #4a90e2; color: white; padding: 1rem; text-align:center; }
  nav { display:flex; justify-content:center; margin: 1rem 0; gap:5px; flex-wrap: wrap;}
  nav button { padding: 0.5rem 1rem; cursor:pointer; border:none; border-radius:5px; background:#e0e0e0; transition:0.3s; }
  nav button.active { background:#4a90e2; color:white; }
  .container { max-width: 900px; margin:0 auto; padding:1rem; }
  .task { display:flex; align-items:center; gap:0.5rem; padding:0.3rem; }
  .task.done span { text-decoration: line-through; color: gray; }
  #progress { background: #ddd; height: 25px; border-radius: 12px; margin: 1rem 0; overflow:hidden; }
  #progress-fill { background: #4a90e2; height: 100%; width:0%; text-align:center; color:white; line-height:25px; transition: width 0.5s; }
  table { width:100%; border-collapse: collapse; margin-top:1rem; }
  table, th, td { border:1px solid #ccc; }
  th, td { padding:0.5rem; text-align:center; }
  .done-reward { text-decoration: line-through; color: gray; }
  input, select, button.add-btn { padding:0.5rem; margin:0.2rem 0; border-radius:5px; border:1px solid #ccc; }
  button.add-btn { background:#4a90e2; color:white; border:none; cursor:pointer; transition:0.3s; }
  button.add-btn:hover { background:#357ABD; }
  button.delete-btn { background:#e74c3c; color:white; border:none; border-radius:4px; cursor:pointer; padding:0.2rem 0.5rem; }
  button.delete-btn:hover { background:#c0392b; }
</style>
</head>
<body>

<header>
  <h1>Agenda de Tarefas Semanal</h1>
</header>

<nav id="day-buttons">
  <button data-day="D" class="active">D</button>
  <button data-day="S">S</button>
  <button data-day="T">T</button>
  <button data-day="Q">Q</button>
  <button data-day="Q2">Q</button>
  <button data-day="S2">S</button>
  <button data-day="S3">S</button>
</nav>

<div class="container">

  <div id="days"></div>

  <div id="progress">
    <div id="progress-fill">0%</div>
  </div>
  <p>Pontos Semanais: <span id="points">0</span></p>

  <h2>Adicionar Tarefa</h2>
  <input type="text" id="new-task" placeholder="Nome da tarefa">
  <select id="task-day">
    <option value="D">Domingo</option>
    <option value="S">Segunda</option>
    <option value="T">Ter√ßa</option>
    <option value="Q">Quarta</option>
    <option value="Q2">Quinta</option>
    <option value="S2">Sexta</option>
    <option value="S3">S√°bado</option>
  </select>
  <button class="add-btn" onclick="addTask()">Adicionar Tarefa</button>

  <h2>Adicionar Recompensa</h2>
  <input type="text" id="reward-name" placeholder="Nome da recompensa">
  <input type="number" id="reward-points" placeholder="Pontos necess√°rios">
  <button class="add-btn" onclick="addReward()">Adicionar Recompensa</button>

  <h2>Recompensas</h2>
  <table id="rewards-table">
    <tr><th>Pontos</th><th>Recompensa</th><th>A√ß√£o</th></tr>
  </table>

  <h2>Recompensas Resgatadas</h2>
  <ul id="redeemed-rewards"></ul>

</div>

<script>
let daysData = {
  D: ["13:19 üçΩÔ∏è Almo√ßo", "13:40 üßº Lavar lou√ßa"],
  S: ["07:20 üè´ Chegar na escola", "12:10 üè´ Sa√≠da da escola", "13:15 üè† Chegar em casa", "13:19 üçΩÔ∏è Almo√ßo", "13:40 üßº Lavar lou√ßa", "14:00 üç≤ Fazer jantar segunda e ter√ßa"],
  T: ["07:20 üè´ Chegar na escola", "12:10 üè´ Sa√≠da da escola", "13:15 üè† Chegar em casa", "13:19 üçΩÔ∏è Almo√ßo", "13:40 üßº Lavar lou√ßa", "14:00 üç≤ Fazer jantar segunda e ter√ßa"],
  Q: ["07:20 üè´ Chegar na escola", "12:10 üè´ Sa√≠da da escola", "13:15 üè† Chegar em casa", "13:19 üçΩÔ∏è Almo√ßo", "13:40 üßº Lavar lou√ßa"],
  Q2: ["07:20 üè´ Chegar na escola", "12:10 üè´ Sa√≠da da escola", "13:15 üè† Chegar em casa", "13:19 üçΩÔ∏è Almo√ßo", "13:40 üßº Lavar lou√ßa", "11:00 üé¨ Postar v√≠deo no YouTube"],
  S2: ["07:20 üè´ Chegar na escola", "12:10 üè´ Sa√≠da da escola", "13:15 üè† Chegar em casa", "13:19 üçΩÔ∏è Almo√ßo", "13:40 üßº Lavar lou√ßa"],
  S3: ["13:19 üçΩÔ∏è Almo√ßo", "13:40 üßº Lavar lou√ßa"]
};

let rewardsData = [
  { points: 10, name: "Dinheiro salgado" },
  { points: 40, name: "R$10" },
  { points: 50, name: "Ox Burguer" }
];

let totalPoints = 0;

function saveState() {
  localStorage.setItem("daysData", JSON.stringify(daysData));
  localStorage.setItem("rewardsData", JSON.stringify(rewardsData));
  localStorage.setItem("totalPoints", totalPoints);
}

function loadState() {
  const savedDays = JSON.parse(localStorage.getItem("daysData"));
  if (savedDays) daysData = savedDays;
  const savedRewards = JSON.parse(localStorage.getItem("rewardsData"));
  if (savedRewards) rewardsData = savedRewards;
  const savedPoints = parseInt(localStorage.getItem("totalPoints"));
  if (!isNaN(savedPoints)) totalPoints = savedPoints;
}

function renderDays(selectedDay="D") {
  const daysDiv = document.getElementById("days");
  daysDiv.innerHTML = "";

  daysData[selectedDay].forEach((task, i) => {
    if (typeof task === "string") task = { name: task, done: false };
    const taskDiv = document.createElement("div");
    taskDiv.classList.add("task");

    const checkbox = document.createElement("input");
    checkbox.type = "checkbox";
    checkbox.checked = task.done || false;

    checkbox.onchange = () => {
      task.done = checkbox.checked;
      daysData[selectedDay][i] = task;
      totalPoints = calculateWeeklyPoints();
      updateProgress();
      saveState();
      taskDiv.classList.toggle("done", checkbox.checked);
    };

    taskDiv.appendChild(checkbox);

    const label = document.createElement("span");
    label.textContent = task.name;
    taskDiv.appendChild(label);

    if (checkbox.checked) taskDiv.classList.add("done");

    const deleteBtn = document.createElement("button");
    deleteBtn.textContent = "üóëÔ∏è";
    deleteBtn.className = "delete-btn";
    deleteBtn.onclick = () => {
      daysData[selectedDay].splice(i, 1);
      renderDays(selectedDay);
      totalPoints = calculateWeeklyPoints();
      updateProgress();
      saveState();
    };
    taskDiv.appendChild(deleteBtn);

    daysDiv.appendChild(taskDiv);
  });

  updateProgress();
}

function calculateWeeklyPoints() {
  let points = 0;
  Object.values(daysData).forEach(day => {
    day.forEach(task => {
      if (typeof task === "object" && task.done) points++;
    });
  });
  return points;
}

function updateProgress() {
  const totalTasks = Object.values(daysData).reduce((sum, day) => sum + day.length, 0);
  const percent = totalTasks ? Math.round((totalPoints / totalTasks) * 100) : 0;
  const progressFill = document.getElementById("progress-fill");
  progressFill.style.width = percent + "%";
  progressFill.textContent = percent + "%";
  document.getElementById("points").textContent = totalPoints;
}

function renderRewards() {
  const table = document.getElementById("rewards-table");
  table.innerHTML = "<tr><th>Pontos</th><th>Recompensa</th><th>A√ß√£o</th></tr>";

  rewardsData.forEach((reward, i) => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${reward.points}</td>
      <td>${reward.name}</td>
      <td>
        <button onclick="redeemReward(${i})">Resgatar</button>
        <button onclick="deleteReward(${i})" class="delete-btn">üóëÔ∏è</button>
      </td>
    `;
    table.appendChild(tr);
  });
}

function redeemReward(index) {
  const reward = rewardsData[index];
  if (totalPoints >= reward.points) {
    totalPoints -= reward.points;
    document.getElementById("redeemed-rewards").innerHTML += `<li>${reward.name}</li>`;
    updateProgress();
    saveState();
  } else {
    alert("Voc√™ n√£o tem pontos suficientes!");
  }
}

function deleteReward(index) {
  rewardsData.splice(index, 1);
  renderRewards();
  saveState();
}

function addTask() {
  const name = document.getElementById("new-task").value;
  const day = document.getElementById("task-day").value;
  if (name.trim() === "") return;
  daysData[day].push({ name, done: false });
  document.getElementById("new-task").value = "";
  renderDays(day);
  saveState();
}

function addReward() {
  const name = document.getElementById("reward-name").value;
  const points = parseInt(document.getElementById("reward-points").value);
  if (!name || isNaN(points)) return;
  rewardsData.push({name, points});
  document.getElementById("reward-name").value = "";
  document.getElementById("reward-points").value = "";
  renderRewards();
  saveState();
}

// Navega√ß√£o entre dias
document.querySelectorAll("#day-buttons button").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll("#day-buttons button").forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    renderDays(btn.dataset.day);
  });
});

loadState();
renderDays();
renderRewards();
</script>

</body>
</html>

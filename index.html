<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>Agenda Interativa</title>
<style>
:root {
  --bg: #f3e8ff;
  --panel: #e9d5ff;
  --muted: #7c3aed;
  --text: #4c1d95;
  --accent: #a78bfa;
  --ok: #6b21a8;
  --danger: #9333ea;
  --card: #ede9fe;
  --radius: 18px;
}
body { margin:0; font-family: 'Comic Sans MS', cursive, sans-serif; background: var(--bg); color: var(--text); }
.wrap { max-width: 480px; margin:24px auto; padding:0 12px; }
header { display:flex; flex-direction:column; align-items:center; gap:8px; margin-bottom:18px; }
h1 { font-size:24px; margin:0; text-align:center; }
.points { font-size:16px; color: var(--accent); font-weight:bold; }
.btn { cursor:pointer; border:none; padding:6px 10px; border-radius:12px; font-weight:bold; transition: transform .2s; }
.btn.ok { background:var(--accent); color:#fff; }
.btn.danger { background:#9333ea; color:#fff; }
.btn.small { font-size:13px; }
.panel { background: var(--panel); border-radius: var(--radius); padding:16px; margin-bottom: 20px; box-shadow: 2px 2px 12px rgba(0,0,0,0.2); }
ul.tasks { list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:10px }
.task { display:flex; flex-direction:column; background:var(--card); padding:10px; border-radius:12px; }
.task.done { opacity:.6; text-decoration: line-through; }
.time { background:#e0c7ff; padding:4px 8px; border-radius:6px; margin-right:8px; font-size:14px; display:inline-block; }
.extra { color: #a78bfa; margin-left:6px; font-weight:bold; }
.star { color: gold; margin-left:4px; font-size:16px; }
.day-container { display:flex; gap:4px; margin-top:6px; }
.day { width:24px; height:24px; border-radius:50%; background:#c4b5fd; color:#fff; font-size:12px; display:flex; align-items:center; justify-content:center; cursor:pointer; margin-bottom:4px; }
.day.done { background:#6b21a8; }
table { width:100%; border-collapse: separate; border-spacing: 0; border-radius:12px; overflow:hidden; margin-top:10px; font-size:14px; }
th, td { border:none; padding:8px; text-align:left; }
th { background:#c4b5fd; color:#4c1d95; font-weight:bold }
tr:nth-child(even) td { background:#e9d5ff; }
tr:nth-child(odd) td { background:#ede9fe; }
.footer-note { text-align:center; margin-top:20px; color: var(--muted); font-weight:bold; font-size:14px; }
#pointMsg { display:none; background:#a78bfa; color:#fff; padding:10px; margin-top:10px; text-align:center; border-radius:12px; font-weight:bold; }
#daysTitle { text-align:center; font-weight:bold; margin-bottom:8px; color: var(--text); font-size:14px; }
</style>
</head>
<body>
<div class="wrap">
<header>
<h1>üóìÔ∏è Agenda Interativa</h1>
<div class="points">‚≠ê Pontos: <span id="points">0</span></div>
<div id="pointMsg">üéâ Parab√©ns! Voc√™ ganhou pontos da semana!</div>
</header>

<section class="panel">
<h2>Tarefas</h2>
<ul class="tasks" id="taskList"></ul>
<div id="emptyState" style="display:none">Nenhuma tarefa.</div>
</section>

<section class="panel">
<h2>Dias para concluir</h2>
<div id="daysTitle">D &nbsp; S &nbsp; T &nbsp; Q &nbsp; Q &nbsp; S &nbsp; S</div>
<div class="day-container" id="daysContainer"></div>
</section>

<section class="panel">
<h2>Adicionar tarefa</h2>
<form id="taskForm" style="display:flex; flex-direction:column; gap:8px;">
<input id="title" type="text" placeholder="T√≠tulo" required />
<input id="time" type="time" />
<button class="btn ok" type="submit">+ Adicionar</button>
</form>
</section>

<section class="panel">
<h2>üéÅ Tabela de Recompensas</h2>
<table id="rewardTable">
<tr><th>Pontos</th><th>Recompensa</th><th>A√ß√£o</th></tr>
<tr><td>10</td><td>Dinheiro para comprar salgado</td><td><button class="btn ok small">Resgatar</button> <button class="btn danger small">Excluir</button></td></tr>
<tr><td>40</td><td>R$10</td><td><button class="btn ok small">Resgatar</button> <button class="btn danger small">Excluir</button></td></tr>
<tr><td>50</td><td>Ox Burguer</td><td><button class="btn ok small">Resgatar</button> <button class="btn danger small">Excluir</button></td></tr>
</table>
<form id="addRewardForm" style="display:flex; flex-direction:column; gap:6px; margin-top:8px;">
<input id="rewardPoints" type="number" placeholder="Pontos" required />
<input id="rewardDesc" type="text" placeholder="Descri√ß√£o" required />
<button class="btn ok" type="submit">+ Adicionar recompensa</button>
</form>
</section>

<div class="footer-note">Complete suas tarefas e ganhe um pr√™mio! üéâ</div>
</div>

<script>
const $ = (s)=>document.querySelector(s);
const uid = ()=>Math.random().toString(36).slice(2,9);
const daysOfWeek = ['D','S','T','Q','Q','S','S'];

function defaultTasks(){
  return [
    { id: uid(), title:'üè´ Chegar na escola', time:'07:20', done:[], weeklyPoints:0 },
    { id: uid(), title:'üè´ Sa√≠da da escola', time:'12:10', done:[], weeklyPoints:0 },
    { id: uid(), title:'üè† Chegar em casa', time:'13:15', done:[], weeklyPoints:0 },
    { id: uid(), title:'üçΩÔ∏è Almo√ßo', time:'13:19', done:[], weeklyPoints:0 },
    { id: uid(), title:'üßº Lavar lou√ßa', time:'13:40', done:[], weeklyPoints:0 },
    { id: uid(), title:'üç≤ Fazer jantar (Segunda e Ter√ßa)', time:'14:00', done:[], weeklyPoints:10 },
    { id: uid(), title:'üé¨ Postar v√≠deo no YouTube (Quinta)', time:'11:00', done:[], weeklyPoints:0 }
  ];
}

let state = JSON.parse(localStorage.getItem('agenda-v2')) || { tasks: defaultTasks(), points:0, redeemed:[], weekStart: new Date().getTime() };

function getWeekNumber(d){
  d = new Date(d.getFullYear(), d.getMonth(), d.getDate());
  const dayNum = d.getDay() || 7;
  d.setDate(d.getDate() + 4 - dayNum);
  const yearStart = new Date(d.getFullYear(),0,1);
  return Math.ceil((((d - yearStart) / 86400000) + 1)/7);
}

function startNewWeek(){
  const now = new Date();
  if(getWeekNumber(now) !== getWeekNumber(new Date(state.weekStart))){
    state.tasks.forEach(t=> t.done=[]);
    state.weekStart = now.getTime();
    save();
  }
}

function save(){ localStorage.setItem('agenda-v2', JSON.stringify(state)); }

function showPointMessage(){
  const msg = $('#pointMsg');
  msg.style.display='block';
  setTimeout(()=>{ msg.style.display='none'; },2000);
}

function render(){
  startNewWeek();
  $('#points').innerText = state.points;
  const list = $('#taskList'); list.innerHTML='';
  if(state.tasks.length===0){ $('#emptyState').style.display='block'; }else{ $('#emptyState').style.display='none'; }

  state.tasks.forEach(t=>{
    const li=document.createElement('li'); li.className='task';
    const topDiv=document.createElement('div'); topDiv.style.display='flex'; topDiv.style.alignItems='center';
    const time=document.createElement('div'); time.className='time'; time.innerText=t.time||'--:--';
    const title=document.createElement('div'); title.innerHTML=t.title;
    if(t.weeklyPoints){ const star=document.createElement('span'); star.className='extra'; star.innerHTML='‚≠ê+'+t.weeklyPoints; title.appendChild(star); }
    topDiv.append(time,title);
    li.append(topDiv);
    list.appendChild(li);
  });
}

render();
</script>
</body>
</html>
